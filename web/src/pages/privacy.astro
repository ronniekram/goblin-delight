---
import { sanityClient } from "sanity:client";
import { format } from "date-fns";

import Page from "@layouts/page.astro";
import PolicyText from "@components/policy/index.astro";
import type { SanityPrivacy } from "@utils/sanity.ts";

const getPrivacy = async (): Promise<SanityPrivacy> => {
  return await sanityClient.fetch(`*[_type == "privacy"][0]{
    _updatedAt,
    body,
  }`);
};

const policy = await getPrivacy();
const date = new Date(policy?._updatedAt);
---

<Page title="Privacy Policy">
  <article class="wrapper flex flex-col space-y-12 sm:space-y-14">
    <section class="inner">
      <h1
        class="font-sans font-xbold text-green-600 text-5xl sm:text-6xl md:text-7xl lg:text-8xl xl:text-9xl"
      >
        Privacy Policy
      </h1>
      <h4 class="font-sans text-green-900 text-sm xl:text-base mt-1 xl:mt-2">
        Last updated: {format(new Date(date), `LL/dd/y`)}
      </h4>
    </section>
    <section class="inner flex flex-col space-y-2 -mt-3 sm:-mt-3.5">
      <PolicyText body={policy.body} />
    </section>
  </article>
</Page>
